## Модель вычислителя для проекта twig

Следует выделять проходы трансляции, хотя, реально, они не разделены по времени и проход более высокого уровня выполняются сразу, после завершения этапа свертки предыдущего.

### нулевой проход.

На этом этапе производится дешифровка и свертка лексем из входящего потока. Каждая лексема получает тип `TYPE_STRING`, `TYPE_OPERATION`, `TYPE_COMMA` и так далее. Тип операции выбирается по результатам регулярного выражения, которое вычленяет лексемы из входящего потока. Определение типа лексем предварительное, для некоторых операций требуется дополнительное уточнение типа.

### первый проход - Уточнение типа операндов. Дешифровка приоритетов операций.

 Производится коррекция лексем типа TYPE_COMMA и TYPE_OPERATION, которые по своему положении в `арифметическом выражении` стоят на месте операций или операндов. При этом однозначно определяется роль операции, суффикс, префикс, унарная или бинарная операция.

### второй проход - свертка арифметических выражений в обратную польскую форму.



## типы лексем-операндов

### базовые типы

- `TYPE_NONE` - неопределенный тип
- `TYPE_STRING` - строка. Результат обработки изображения строки из входного потока
- `TYPE_DIGIT` - число.
- `TYPE_ID` - изображение идентифиатора
- `TYPE_STRATCH` - промежуточный тип - получение атрибута объекта 'через точку'
- `TYPE_COMMA` - односимвольные операции, которые ради оптимизации регулярки выводятся за ее пределы,
или реальные символы запятая и точка с запятой.
- `TYPE_OPERATION` - определенные регуляркой символьные операции.

### предварительно обработанные типы

Все TYPE_X... типы - литералы соответствующих типов - литеральные изображения для вставки в код.

- `TYPE_LIST` -  результат обработки списковых конструкций - параметры вызова функций, изображение массива, вырезка из массива, описатели функций и т.д.
      , TYPE_SLICE = 18
      ,


      , TYPE_OBJECT = 8

      , TYPE_EOF = 14
      , TYPE_STRING1 = 15
      , TYPE_STRING2 = 16

      , TYPE_STRATCH =19